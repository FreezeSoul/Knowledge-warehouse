# Linux shell之数组与字典



[TOC]

# 数组

## 数组的定义

​	数组可以使用 `declear -a `进行变量的类型定义。

　　何为数组？学过计算机编程语言的同学都知道，数组的特性就是一组数据类型相同的集合（不包括有一些编程语言提出来的关联数组的概念）。那么shell中数组是怎么定义的呢，我们来看两种数据类型：一是数值类型，二是字符串类型；虽然shell本身是弱类型的，但也可以这么区分。

　　**数值类型的数组：**一对括号表示数组，数组中元素之间使用“空格”来隔开。

　　举个列子: 

　　arr_number=(1 2 3 4 5);

　　**字符串类型数组：**同样，使用一对括号表示数组，其中数组中的元素使用双引号或者单引号包含，同样使用“空格”来隔开。

　　arr_string=("abc" "edf" "sss"); 或者 arr_string=('abc' 'edf' 'sss');

### 数组有多种定义方式：

- 方式一

```shell
names[0]=wangwei;
names[1]=david;
names[2]=rose;
```

- 方式二

```shell
names=([0]=wangwei [1]=david [2]=rose);
```

- 方式三( **常用方式**)

```
names=(wangwei david rose);
```



## 数组的操作

　　我们使用数值类型数组arr_number=(1 2 3 4 5)做为源数组进行相关的讲解：获取数组长度，读取某个下标的值，对某个下标赋值，删除、分配和替换以及遍历。提一个知识点，我们在shell里面想获取某个变量的值，使用$符开头，如：$a或者${a}即可。

### 获取数组长度

　　arr_length=`${#arr_number[*]}`或`${#arr_number[@]}`均可，即形式：`${#数组名[@/*]}` 可得到数组的长度。

### 读取某个下标的值

　　arr_index2=`${arr_number[2]}`，即形式：${数组名[下标]}

### 对某个下标赋值

这里需要提出两个问题：

- 第一个问题是 如果该下标元素已经存在，会怎么样？

会修改该下标的值为新的指定值。

例如：arr_number[2]=100，数组被修改为(1 2 100 4 5)

- 第二个问题是如果指定的下标已经超过当前数组的大小，如上述的arr_number的大小为5，指定下标为10或者11或者大于5的任意值会如何？

新赋的值被追加到数组的尾部。

例如：arr_number[13]=13，数组被修改为(1 2 100 4 5 13)

### 删除操作

清除某个元素：unset arr_number[1]，这里清除下标为1的数组；

清空整个数组：unset arr_number;

### 分片访问

分片访问形式为：${数组名[@或*]:开始下标:结束下标}，注意，不包括结束下标元素的值。

例如：${arr_number[@]:1:4}，这里分片访问从下标为1开始，元素个数为4。

### 模式替换

形式为：${数组名[@或*]/模式/新值}

例如：${arr_number[@]/2/98}

### 数组的遍历

数组遍历我们使用for语句来演示：
```shell
for v in ${arr_number[@]}; do
    echo $v;
done
```

# 字典

## 字典的定义

```shell
#必须先声明
declare -A dic
dic=([key1]="value1" [key2]="value2" [key3]="value3")
```

## 字典的操作

### 打印指定key的value

```shell
echo ${dic["key1"]}
```

### 打印所有key值

```shell
echo ${!dic[*]}
```

### 打印所有value

```shell
echo ${dic[*]}
```

### 字典添加一个新元素

```shell
dic+=（[key4]="value4"）
```

### 遍历

```shell
for key in $(echo ${!dic[*]})
do
    echo "$key : ${dic[$key]}"
done
```



 